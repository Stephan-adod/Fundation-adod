# AT-002: Improve Execution Prompt Output

## Business Value
Aktuell sind die Execution Prompts zu generisch und erzeugen uneinheitliche Outputs.  
Dies führt zu manueller Nacharbeit und häufigen CI-Fehlern.  
Ziel ist es, stabile und formatierte Outputs zu erzeugen, die direkt repo-ready sind.

## DoR (Definition of Ready)
- Zielbild klar: konsistente, CI-kompatible Prompt Outputs
- Abhängigkeit AT-001 (Health-Check-Script) erfüllt
- CI Setup grün (Lint/Docs/Changelog läuft)
- Codex Processing Loop aktiv

## DoD (Definition of Done)
- Execution Prompt liefert konsistent Markdown/Code ohne manuelle Nacharbeit
- CI (Lint/Format/Test/Docs/Changelog) grün
- Artefakte sind UTF-8, BOM-frei, markdownlint-kompatibel
- Ticket dokumentiert Lösungsvariante (A oder B) und begründet Entscheidung
- Evidence: Beispiel-Run mit grünem CI als Nachweis im PR
- **Automatisierungsschritt dokumentiert** (z. B. CLI-Wrapper oder GH Action für Meta-Prompt)
- **Governance-Check integriert** (DoR/DoD Validator oder automatisierte Lint-Checks für Tickets)
- **Feedback-Loop gesichert** (Loop Log mit Input/Output/CI-Ergebnissen automatisch oder halbautomatisch erfasst)

## Ziel
- Prompt-Output ist präzise, konsistent, CI-kompatibel und repo-ready
- Operator spart ~50 % Nacharbeit
- Saubere Verknüpfung mit Loops und Artefakten (Systemkarte etc.)
- **Langfristig: Automatisierung, Governance und Feedback-Loops fest in den Prozess integriert**

## Abhängigkeiten
- AT-001 (Health-Check-Script)
- CI Setup (Lint/Docs/Changelog)
- Codex Processing Loop

## Lösungsvarianten

### Variante A – Modularisierte Prompt-Templates
- Dedizierte Templates für Tickets, Artefakte, Code, Docs
- CI-Checks im Prompt integriert (z. B. „liefere BOM-frei“)
- Vorteil: Hohe Klarheit, geringe Fehlerquote
- Nachteil: Initial höherer Pflegeaufwand

### Variante B – Meta-Prompt mit dynamischem Routing
- Ein zentraler Meta-Prompt, gesteuert per Parameter (Ticket/Code/Doc)
- Output-Formatierung strikt im Prompt
- Vorteil: Schnelle Umsetzung, weniger Redundanz
- Nachteil: Instabilität bei Spezialfällen möglich

## Handlungsempfehlung
- Kurzfristig (Phase 0/1): Start mit **Variante B** (Meta-Prompt) für schnelle Umsetzung
- Mittelfristig (Phase 2+): Übergang zu **Variante A** für robuste Governance

## Verbesserungsfelder (neu ergänzt)
1. **Automatisierung**  
   Ziel: Reduktion manueller Schritte → Codex Prompt Execution per CLI-Wrapper oder GitHub Action.  

2. **Governance**  
   Ziel: Automatisierte DoR/DoD-Validierung und Ticket-Linting → weniger manuelle Checklisten.  

3. **Feedback-Loop**  
   Ziel: Strukturierte Dokumentation von Input/Output + CI-Resultat → automatische Loop Logs als Evidence.  

# Deep Analysis Gap Report – M1 (Governance & Self-Healing)

## 1. Übersicht (Ziel M1)

M1 fordert eine self-healing Governance-Basis mit Health-Check, konsistentem Execution-Prompt-Output und einem Friction-Reduction-Bundle (AT-001, AT-002, AT-PATCH-01).【F:artefacts/project_plan_v0.4.md†L17-L29】

## 2. Gap-Tabelle

| Ticket      | Soll-Deliverables                                                                                                                                           | Ist im Repo                                                                                                                                                                                                                                                                                                                                                                    | Status | Kommentar                                                                                                                                                                                                                                                                                                                         |
| ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| AT-001      | Health-Check Script (inkl. docs-lite Absicherung).【F:artefacts/project_plan_v0.4.md†L21-L21】                                                              | Script liefert Health-Check, per NPM-Script und CI eingebunden; docs-lite Workflow ergänzt. Evidence im Iteration-Log dokumentiert.【F:tools/health-check.mjs†L1-L1】【F:package.json†L1-L7】【F:.github/workflows/ci.yml†L1-L14】【F:.github/workflows/docs-lite.yml†L1-L52】【F:artefacts/iteration_log.md†L23-L66】                                                         | OK     | Deliverable vorhanden; KPI-Evidence (CI-Green-Rate) noch nicht persistiert, siehe globale Gaps.                                                                                                                                                                                                                                   |
| AT-002      | Execution Prompt Output + Governance Workflow (Prettier, UTF-8, Validator, Auto-Format).【F:artefacts/project_plan_v0.4.md†L22-L22】                        | Governance-Workflow, UTF-8-Checker, Ticket-Validator und Auto-Format-Guardrail umgesetzt.【F:.github/workflows/governance.yml†L1-L123】【F:scripts/check-utf8.mjs†L1-L170】【F:scripts/validate-ticket.mjs†L1-L182】【F:.github/workflows/auto-format.yml†L1-L47】                                                                                                             | Drift  | Es fehlt ein abgelegter Execution-Prompt-Output (`artefacts/execution/` leer) und Loop-Logs; Workflow ruft `tools/loop-log.mjs` mit Flag auf, das das Script nicht unterstützt, daher kein automatisches Logging.【08bb53†L1-L1】【F:tools/loop-log.mjs†L10-L58】【F:.github/workflows/governance.yml†L121-L123】【1852ef†L1-L5】 |
| AT-PATCH-01 | Friction Reduction Bundle (PR-Template, Issue-Form, Editor Defaults, VS Code Tasks, Hybrid Trigger, Guardrail).【F:artefacts/project_plan_v0.4.md†L23-L29】 | PR-Template, Issue-Form, Editor-Defaults, VS-Code-Tasks, `/codex`-Trigger und Guardrail umgesetzt.【F:.github/pull_request_template.md†L1-L30】【F:.github/ISSUE_TEMPLATE/at-ticket.yml†L1-L70】【F:.editorconfig†L1-L12】【F:.prettierignore†L1-L2】【F:.vscode/tasks.json†L1-L13】【F:.github/workflows/codex-run.yml†L1-L33】【F:.github/workflows/auto-format.yml†L1-L47】 | Drift  | Deliverables existieren, aber kein Ticket `tickets/AT-PATCH-01.md`; Bundle ist nicht in Loop-Logs oder KPIs verankert (siehe globale Gaps).【8c5cc9†L1-L2】【1852ef†L1-L5】                                                                                                                                                       |

## 3. Globale Gaps

- **Loop-Logging & Evidence fehlen:** Weder `artefacts/loop_logs/` noch JSONL-Outputs werden erzeugt, obwohl Tickets Loop-Logs fordern; `tools/loop-log.mjs` kennt das im Governance-Workflow genutzte Flag nicht, sodass kein Logging stattfindet.【F:tools/loop-log.mjs†L10-L58】【F:.github/workflows/governance.yml†L121-L123】【1852ef†L1-L5】
- **Execution-Prompt-Artefakte fehlen:** `artefacts/execution/` ist leer, sodass kein Prompt-Output oder Run-Evidence für AT-002 nachvollziehbar ist.【08bb53†L1-L1】【F:artefacts/project_plan_v0.4.md†L22-L22】
- **CI-Metriken & KPIs nicht belegt:** `scripts/ci-metrics.mjs` existiert, aber `artefacts/reports/ci-metrics.jsonl` wird nicht eingecheckt; KPI „CI-Green-Rate ≥90 %“ bleibt ungemessen.【F:scripts/ci-metrics.mjs†L1-L23】【7161d1†L1-L1】【F:artefacts/project_plan_v0.4.md†L31-L34】
- **Dokumentations-Drift:** Systemkarte/Loop-Dokumente referenzieren `.foundation.yml`, `docs/security_policy.md`, `artefacts/retro_log.md` und `artefacts/reports/ci-metrics.jsonl`, die fehlen.【F:artefacts/systemkarte.md†L67-L92】【F:artefacts/loops/Feedback_Loop.md†L7-L31】【803658†L1-L1】【d1df96†L1-L1】【7161d1†L1-L1】
- **Ticket-Abdeckung unvollständig:** `tickets/AT-PATCH-01.md` existiert nicht, wodurch Nachvollziehbarkeit der Patch-Umsetzung fehlt.【8c5cc9†L1-L2】

## 4. Handlungsempfehlungen (priorisiert)

1. **Loop-Logging reparieren & nutzen:** `tools/loop-log.mjs` um Flags wie `--ticket-from-branch` erweitern oder Workflow anpassen und sicherstellen, dass `artefacts/loop_logs/` automatisch befüllt wird; damit erfüllen AT-002 und AT-PATCH-01 ihre Feedback-/Governance-DoD und schaffen Evidence.【F:tools/loop-log.mjs†L10-L58】【F:.github/workflows/governance.yml†L121-L123】
2. **Execution-Prompt-Evidence materialisieren:** Prompt-Ausgaben (z. B. generierte Scripts/Docs) unter `artefacts/execution/` oder ähnlichen Pfaden versionieren und mit Loop-Logs verknüpfen, um AT-002 vollständig abzuschließen.【08bb53†L1-L1】【F:artefacts/project_plan_v0.4.md†L22-L22】
3. **CI-Metriken automatisiert persistieren:** Workflows so erweitern, dass `scripts/ci-metrics.mjs` Outputs nach `artefacts/reports/ci-metrics.jsonl` schreibt und committet; dadurch werden KPIs messbar und Self-Healing überprüfbar.【F:scripts/ci-metrics.mjs†L1-L23】【7161d1†L1-L1】【F:artefacts/project_plan_v0.4.md†L31-L34】
4. **Dokumentation synchronisieren:** Systemkarte und Loop-Dokumente mit dem Repository abgleichen (fehlende Artefakte anlegen oder Referenzen entfernen) und das fehlende Ticket `AT-PATCH-01` ergänzen, um Governance-Transparenz wiederherzustellen.【F:artefacts/systemkarte.md†L67-L92】【F:artefacts/loops/Feedback_Loop.md†L7-L31】【803658†L1-L1】【d1df96†L1-L1】【8c5cc9†L1-L2】
5. **KPI-Belege in Tickets aufnehmen:** Tickets bzw. PR-Vorlagen so nutzen, dass CI-Green-Rate und Operator-KPIs dokumentiert werden (z. B. Step-Summary-Auszüge im Repo sichern), um M1-KPI-Ziele messbar zu machen.【F:.github/pull_request_template.md†L12-L27】【F:artefacts/project_plan_v0.4.md†L31-L34】
